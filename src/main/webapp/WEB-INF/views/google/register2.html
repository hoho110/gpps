<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>政采贷</title>

<!-- Bootstrap core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/index/justified-nav.css" rel="stylesheet">
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script type="text/javascript"
				src="/resources/EasyServiceClientFullZ.js"></script>
		<script type="text/javascript"
				src="/easyservice/gpps.service.ILenderService?json"></script>
<!--[if lt IE 9]>
      <script src="js/cdn/html5shiv.min.js"></script>
      <script src="js/cdn/respond.min.js"></script>
<![endif]-->
</head>
<body>
	<div class="container">
	
	<div class="row" id="header" style="padding-left:15px; padding-right:15px;">
      
      </div>
	
	<div class="form-horizontal" role="form" style="width:400px; margin: 0 auto;">
		<div class="form-group">
    		<label class="col-sm-3 control-label">第二步</label>
    		<div class="col-sm-7">
      			<p class="form-control-static">填写详细信息</p>
    		</div>
    		<div class="col-sm-2">
      			<p class="form-control-static"><a href="myaccount.html">取消</a></p>
    		</div>
  		</div>
  		<div style="width:100%" id="message"></div>
		
	
		<div class="form-group has-success has-feedback">
			<label class="control-label col-sm-3" for="name">您的姓名*</label>
			<div class="col-sm-9">
				<input type="text" class="form-control" id="name">
			</div>
		</div>
		
		<div class="form-group has-success has-feedback">
			<label class="control-label col-sm-3" for="identity">身份证号*</label>
			<div class="col-sm-9">
				<input type="text" class="form-control" id="identity">
			</div>
		</div>
		
		
		<div class="form-group has-success">
			<label class="control-label col-sm-3" for="addr">性别</label>
			<div class="col-sm-9">
			<label class="radio-inline">
  				<input type="radio" name="sex"  checked="checked" value="1"> 男
			</label>
			<label class="radio-inline">
  				<input type="radio" name="sex" value="0"> 女
			</label>
			</div>
			</div>
		
		
		<div class="form-group has-success has-feedback">
			<label class="control-label col-sm-3" for="addr">住址</label>
			<div class="col-sm-9">
				<input type="password" class="form-control" id="addr">
			</div>
		</div>

			<div class="form-group has-success">
			<label class="control-label col-sm-3" for="addr">住址</label>
			<div class="col-sm-9">
			<label class="radio-inline">
  				<input type="radio" name="salary" checked="checked" value="-100000"> 10万以内
			</label>
			<label class="radio-inline">
  				<input type="radio" name="salary" value="100000-300000"> 10万到30万
			</label>
			<label class="radio-inline">
  				<input type="radio" name="salary" value="300000-"> 30万以上
			</label>
			</div>
			</div>
			
			
			<button id="confirm" class="btn btn-lg btn-success btn-block">确定</button>
			

		</div>
		
	</div>
	
	    <!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">第三方认证</h4>
      </div>
      <div class="modal-body">
       认证完成前请不要关闭该对话框，在认证完毕后点击相应的操作以完成认证。
      </div>
      <div class="modal-footer">
        <button id="success" type="button" class="btn btn-primary" data-dismiss="modal">认证成功</button>
        <button id="false" type="button" class="btn btn-default">认证失败</button>
      </div>
    </div>
  </div>
</div>

</body>
<script src="js/head.js"></script>
 <script>
 
 var ok = '<span class="glyphicon glyphicon-ok form-control-feedback"></span>';
 var error = '<span class="glyphicon glyphicon-remove form-control-feedback"></span>';
 
 function addMessage(title){
		$('#message').html('');
		var div = $('<div class="alert alert-warning alert-dismissible" role="alert" style="margin-bottom:2px;"></div>');
		div.append('<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>');
		div.append(title);
		$('#message').append(div);
}

function removeMessage(){
	  $('#message').html('');
}
 
$(document).ready(function() {
	
	header('register2');
	
	var thirdPartyAccount = cuser.thirdPartyAccount;
	
	$('#name').focus();
		$('#skip').click(function(e){
			window.parent.toward("myaccount");
		});
       $('#confirm').click(function(e){
    	   var name = $('input#name').val();
    	   var identity = $('input#identity').val();
    	   var addr = $('input#addr').val();
    	   var sex = $("input[name='sex']:checked").val();
    	   var salary = $("input[name='salary']:checked").val();
    	   
    	   if(name==null||name==''){
    		   $('input#name').parent().find('span').remove();
				$('input#name').parent().append(error);
				addMessage('*请输入姓名');
				return;
				}else{
					$('input#name').parent().find('span').remove();
					$('input#name').parent().append(ok);
					removeMessage();
				}
    	   if(identity==null||identity==''){
    		   $('input#identity').parent().find('span').remove();
				$('input#identity').parent().append(error);
				addMessage('*请输入身份证号');
				return;
				}else{
					$('input#identity').parent().find('span').remove();
					$('input#identity').parent().append(ok);
					removeMessage();
				}
    	   
    	   if(addr==null){
    		   addr = "";
    	   }
    	   
    	   var sexint = parseInt(sex);
    	   
    	   try{
    	   service.registerSecondStep(name, identity, sexint, addr, salary);
    	   }catch(e){
    		   alert(e.message);
    		   return;
    	   }
    	   
    	   if(thirdPartyAccount==null || thirdPartyAccount=="")
    		   {
    		   $('#myModal').modal({
					  keyboard: false,
					  backdrop: false
				});
    	  		 window.open("/account/thirdPartyRegist/request"); 
    		   }
    	   else
    		   window.location.href="myaccount.html";
       });
       
       $('#success').click(function(e){
    	   window.location.href="myaccount.html";
   		});
   	
   		$('#fail').click(function(e){
   			window.location.href="myaccount.html";
   		});
	
})
</script>
</html>